@page "/draw"
@inject IJSRuntime JSRuntime;

<canvas width="1000" height="800" style="background-color:aqua"id="drawCanvas" @onmousemove="(e => draw(e))" @onmousedown="(e => mouseDown(e))" @onmouseup="mouseUp" @onmouseout="mouseUp">

</canvas>
@code {
    private bool isDrawing;

    private void mouseUp()
    {
        isDrawing = false;
        JSRuntime.InvokeAsync<string>("endDrawing");
    }

    private void mouseDown(MouseEventArgs e)
    {
        isDrawing = true;
        JSRuntime.InvokeAsync<string>("startDrawing", e.ClientX, e.ClientY);
    }

    private void draw(MouseEventArgs e)
    {
        if(!isDrawing) return;
        JSRuntime.InvokeAsync<string>("addPoint", e.ClientX, e.ClientY);
    }
}
